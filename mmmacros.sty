
% requires extpfeil package
\newextarrow{\injectc}{5599}{\succ\relbar\rightarrow}

\newcommand{\mi}[1]{\ensuremath{\mathit{#1}}}
\newcommand{\mr}[1]{\ensuremath{\mathrm{#1}}}
\newcommand{\mt}[1]{\ensuremath{\texttt{#1}}}
\newcommand{\mtt}[1]{\ensuremath{\mathtt{#1}}}
\newcommand{\mf}[1]{\ensuremath{\mathbf{#1}}}
\newcommand{\mk}[1]{\ensuremath{\mathfrak{#1}}}
\newcommand{\mc}[1]{\ensuremath{\mathcal{#1}}}
\newcommand{\ms}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\mb}[1]{\ensuremath{\mathbb{#1}}}
\newcommand{\msc}[1]{\ensuremath{\mathscr{#1}}}

\newcommand{\myfig}[3]{\begin{figure} [!ht]
#1
\caption{\label{fig:#2}#3}
\end{figure}}

\newcommand{\textgraybox}[1]{\boxed{#1}}
\newdimen\zzfontsz
\newcommand{\fontsz}[2]{\zzfontsz=#1%
{\fontsize{\zzfontsz}{1.2\zzfontsz}\selectfont{#2}}}
\newcommand{\mathsz}[2]{\text{\fontsz{#1}{$#2$}}}
\newcommand{\instsymColon}{%
     \raisebox{-0.09ex}{\text{\normalfont{:}}}}
\newcommand{\judgboxfontsize}[1]{%
        \mathsz{11pt}{#1}%
}
\newcommand{\judgbox}[2]{%
      {\raggedright \textgraybox{\ensuremath{\judgboxfontsize{#1}}}\!%
        \fontsz{9pt}{\begin{tabular}[c]{l} #2 \end{tabular}} %
}}
\newcounter{typerule}
\crefname{typerule}{rule}{rules}

\newcommand{\typeruleInt}[5]{%
	\def\thetyperule{#1}%
	\refstepcounter{typerule}%
	\label{tr:#4}%
	%
  \ensuremath{\begin{array}{c}#5 \inference{#2}{#3}\end{array}}
}
\newcommand{\typerule}[4]{%
  \typeruleInt{#1}{#2}{#3}{#4}{\textsf{\scriptsize ({#1})} \\      }
}
\newcommand{\typerulenolabel}[4]{%
	\def\thetyperule{#1}%
	\refstepcounter{typerule}%
  \ensuremath{\begin{array}{c} \inference{#2}{#3}\end{array}}
}

\newcommand{\nat}[0]{\ensuremath{\mb{N}}\xspace}
\newcommand{\arr}[0]{\ensuremath{\mb{A}}\xspace}

\newcommand\bnfdef{\ensuremath{\mathrel{::=}}}

\newcommand{\hole}[1]{\ensuremath{\left[#1\right]}}

\newcommand{\taus}[0]{\src{\tau}\xspace}
\newcommand{\Gammas}[0]{\src{\Gamma}\xspace}
\newcommand{\Deltas}[0]{\src{\Delta}\xspace}
\newcommand{\Deltat}[0]{\trg{\Delta}\xspace}




\newcommand{\propositions}{\ensuremath\bm{P}}
\newcommand{\powerset}[1]{\mathscr{P}\left({#1}\right)}

\newcommand{\partials}{\ensuremath\mathcal{P}}
\newcommand{\wholes}{\ensuremath\mathcal{W}}
\newcommand{\wellf}{\vdash_{\text{\tiny W}}}
\newcommand{\singlestep}{\stackrel{e}{\hookrightarrow}}
\newcommand{\linker}{\mathrel\blacktriangleright\joinrel\mathrel\blacktriangleleft}

\newcommand{\emptyevent}{\varepsilon}
\newcommand{\terminationevent}{\lightning}
\newcommand{\estep}[3]{{#1}\stackrel{#2}{\hookrightarrow}{#3}}
\newcommand{\step}[2]{{#1}\hookrightarrow{#2}}

\newcommand{\terminates}[1]{{#1}\Downarrow}


\newcommand{\seqnil}{\cdot}
\newcommand{\seqcons}[2]{{{#1}:{\kern-6.25pt}:{#2}}}

\newcommand{\events}{E\cup\{\lightning\}}
\newcommand{\behav}[1]{\text{Behav}({#1})}
\newcommand{\trace}{\overline{\tau}}
\newcommand{\mktrace}[2]{{#1}\leadsto{#2}}
\newcommand{\prop}{\pi}
\newcommand{\traces}{\text{Traces}}
\newcommand{\lift}[1]{\left\lceil{#1}\right\rceil}
\newcommand{\policy}{\text{Policy}}

\newcommand{\loweq}[2]{{#1}=_L{#2}}
\newcommand{\selfcompo}[2]{{#1}\thicksim{#2}}

\newcommand{\classcollapse}{\star}
\newcommand{\collapse}[1]{{#1}^{\classcollapse}}
\newcommand{\class}[1]{\mathbb{#1}}
\newcommand{\cC}{\class{C}}
\newcommand{\cSafety}{\text{Safety}}
\newcommand{\cHSafety}{\text{HyperSafety}}
\newcommand{\cTwoHSafety}{\text{2-HyperSafety}}
\newcommand{\cKHSafety}{\text{K-HyperSafety}}
\newcommand{\cSS}{\text{SSC}}
\newcommand{\mutex}{\text{MutEx}}
\newcommand{\nonterm}{\text{Nontermination}}
\newcommand{\determ}{\text{Determinism}}
\renewcommand{\ss}{\text{SS}}
\newcommand{\rss}{\text{RSS}}
\newcommand{\Ni}{\text{NI}}
\newcommand{\RNi}{\text{RNI}}
\newcommand{\nvOne}{\text{No-v1}}
\newcommand{\nvFour}{\text{No-v4}}
\newcommand{\nvOneFour}{\text{No-v1-v4}}

\newcommand{\fccomp}[2]{{#1}\overset{\bullet}{\cap}{#2}}
\newcommand{\fcleq}[2]{{#1}\overset{\bullet}{\subseteq}{#2}}

\newcommand{\sat}[2]{{#1}\vDash{#2}}
\newcommand{\nsat}[2]{{#1}\not\vDash{#2}}
\newcommand{\rsat}[2]{{#1}\vDash_{\scriptstyle R}{#2}}
\newcommand{\nrsat}[2]{{#1}\not\vDash_{\scriptstyle R}{#2}}
\newcommand{\instr}[2]{{#1}\injectc[]{}{#2}}
\newcommand{\sinstr}[3]{{#1}\injectc[]{#2}{#3}}

\newcommand{\neutcol}[0]{black}
\newcommand{\stlccol}[0]{RoyalBlue}
\newcommand{\irccol}[0]{Apricot}
\newcommand{\ulccol}[0]{RedOrange}
\newcommand{\objcol}[0]{CarnationPink}
\newcommand{\commoncol}[0]{black}

\newcommand{\col}[2]{\ensuremath{{\color{#1}{#2}}}}

\newcommand{\com}[1]{\ensuremath\mathit{\col{\neutcol}{#1}}}
\newcommand{\src}[1]{\ensuremath\mathsf{\col{\stlccol}{#1}}}
\newcommand{\irl}[1]{\ensuremath\mathit{\col{\irccol}{#1}}}
\newcommand{\trg}[1]{\ensuremath\mathbf{\col{\ulccol}{#1}}}
\newcommand{\obj}[1]{\ensuremath\mathtt{\col{\objcol}{#1}}}
\renewcommand{\S}{\src{S}}
\newcommand{\I}{\irl{I}}
\newcommand{\T}{\trg{T}}
\renewcommand{\O}{\obj{O}}


\newcommand{\tenc}[1]{\trg{\lfloor} {#1} \trg{\rfloor}}
\newcommand{\stinterp}{\trg{\mathbb{i}}^{\S}}
\newcommand{\ttspec}[1]{\trg{\llbracket{#1}\rrbracket}^{\T\to\T}}
% Different compilers; color automatically applied
\newcommand{\stcomp}[1]{\llbracket\src{#1}\rrbracket^{\S\to\T}}
\newcommand{\sicomp}[1]{\llbracket\src{#1}\rrbracket^{\S\to\I}}
\newcommand{\itcomp}[1]{\llbracket\irl{#1}\rrbracket^{\I\to\T}}
\newcommand{\ttcomp}[1]{\llbracket\trg{#1}\rrbracket^{\T\to\T}}

\newcommand{\sitcomp}[1]{\llbracket\src{#1}\rrbracket^{\S\to\I\to\T}}
\newcommand{\uhcsitcomp}[1]{\llbracket{#1}\rrbracket^{\S+\I\to\T}}
\newcommand{\lhcsitcomp}[1]{\llbracket\src{#1}\rrbracket^{\S\to\I+\T}}
\newcommand{\lhcsiocomp}[1]{\llbracket\src{#1}\rrbracket^{\S\to\I+\O}}
\newcommand{\uhciotcomp}[1]{\llbracket{#1}\rrbracket^{\I+\O\to\T}}
% same compilers, but color not automatically applied
\newcommand{\stcompN}[1]{\llbracket{#1}\rrbracket^{\S\to\T}}
\newcommand{\sicompN}[1]{\llbracket{#1}\rrbracket^{\S\to\I}}
\newcommand{\itcompN}[1]{\llbracket{#1}\rrbracket^{\I\to\T}}
\newcommand{\ttcompN}[1]{\llbracket{#1}\rrbracket^{\T\to\T}}


% compiler robustly preserves
\newcommand{\rtp}[2]{\vdash{#1}:{#2}}


% concrete language definitions
\newcommand{\mmlA}{\ensuremath\mathtt{MiniML}_\arr\xspace}
\newcommand{\loc}{\ell}
\newcommand{\refs}{A}%\ensuremath\src{\mathbb{K}}}
\newcommand{\configs}{\src{\Omega}}
\newcommand{\config}[3]{\src{#1};\src{#2};\src{#3}\xspace}

\newcommand{\subst}[3]{{#1}[{#2}\hookrightarrow{#3}]\xspace}
\newcommand{\grow}[2]{{#1}\ll{#2}\xspace}
\newcommand{\grows}[2]{\grow{\src{#1}}{\src{#2}}}

\newcommand{\typecheck}[4]{{#1}\xspace \vdash\xspace {#2} :\ {#3}\xspace\dashv\xspace{#4}\xspace}
\newcommand{\typechecks}[4]{\typecheck{\src{#1}}{\src{#2}}{\src{#3}}{\src{#4}}}
\newcommand{\eval}[3]{{#1}\xspace\xrightarrow{#2}\xspace{#3}\xspace}
\newcommand{\evals}[3]{\src{\eval{#1}{#2}{#3}}}
\newcommand{\ctxeval}[3]{{#1}\xspace\xrightarrow{#2}_{ctx}\xspace{#3}\xspace}
\newcommand{\ctxevals}[3]{\src{\ctxeval{#1}{#2}{#3}}}
\newcommand{\expreval}[5]{{#1}\triangleright\xspace {#2}\xrightarrow{#5}\ {#3}\triangleright\xspace {#4}\xspace}
\newcommand{\exprevals}[5]{\expreval{\src{#1}}{\src{#2}}{\src{#3}}{\src{#4}}{\src{#5}}}
\newcommand{\exec}[5]{{#1}\triangleright\xspace {#2}\xrightarrow{#5}{}\!\!^*\ {#3}\triangleright\xspace {#4}\xspace}
\newcommand{\execs}[5]{\exec{\src{#1}}{\src{#2}}{\src{#3}}{\src{#4}}{\src{#5}}}

% the following environments require the enumitem package
\crefname{ass}{assumption}{assumptions}
\crefname{goal}{goal}{goals}
\newenvironment{assumptions}
    {\begin{enumerate}[label=(\alph*)]
    }
    {
    \end{enumerate}
  }
\newenvironment{goals}
    {\begin{enumerate}[label=(\roman*)]
    }
    {
    \end{enumerate}
  }
