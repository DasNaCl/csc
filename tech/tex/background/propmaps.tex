\subsection{Property Mappings}

This work relies on property mappings introduced in related work~\cite{abate2021extacc}.

\begin{definition}{\definitionlabel[Universal Image]{universal-image}}
  $ 
    \mapUniversal{\sim}{\trgProperty} := 
      \lrbraces{\srcTrace \mid %
        \forall \trgTrace\ldotp \text{if }\xrelTraces{\srcTrace}{\trgTrace}, \text{ then }%
        \trgTrace\in\trgProperty
      }
  $
\end{definition}
\begin{definition}{\definitionlabel[Existential Image]{existential-image}}
  $ 
    \mapExistential{\sim}{\srcProperty} := 
      \lrbraces{\trgTrace \mid %
        \exists \srcTrace\ldotp \xrelTraces{\srcTrace}{\trgTrace} \text{ and }%
        \srcTrace\in\srcProperty
      }
  $
\end{definition}

The lifting of \definitionref{existential-image} and \definitionref{universal-image} to classes of properties is standard, i.e., simply element-wise.

\begin{lemma}[\Coqed]{\lemmalabel[Trace Relation distributes on Universal Image]{xtrace-distribute-universal}}
  Let $X$ be either a trace-property or a class. Then:
  \begin{goals}
    \goal{xtrace-distribute-universal}{\mapUniversal{\fncompo{\sim_1}{\sim_2}}{X} = \mapUniversal{\sim_2}{\mapUniversal{\sim_1}{X}}}
  \end{goals}
\end{lemma}
\begin{proof}
  Straightforward unfolding of \definitionref{universal-image} and \definitionref{function-composition} in \goalref{xtrace-distribute-universal}.
\end{proof}
\begin{lemma}[\Coqed]{\lemmalabel[Trace Relation distributes on Existential Image]{xtrace-distribute-existential}}
  Let $X$ be either a trace-property or a class. Then:
  \begin{goals}
    \goal{xtrace-distribute-existential}{\mapExistential{\fncompo{\sim_1}{\sim_2}}{X} = \mapExistential{\sim_2}{\mapExistential{\sim_1}{X}}}
  \end{goals}
\end{lemma}
\begin{proof}
  Straightforward unfolding of \definitionref{existential-image} and \definitionref{function-composition} in \goalref{xtrace-distribute-existential}.
\end{proof}

